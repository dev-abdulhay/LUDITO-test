# LUDITO-test

## Описание проекта

Данный проект представляет собой REST API для финансового продукта, реализованного на базе Java Spring Boot. В системе
предусмотрены пользователи, у каждого из которых есть баланс. Баланс пользователя изменяется посредством проведения
транзакций.

### Основной функционал:

- Создание и хранение пользователей с балансом.
- Учет транзакций, влияющих на баланс пользователей.
- Поддержка создания, редактирования и получения пользователей через REST API.
- Поддержка создания транзакций через REST API.
- Получение списка транзакций с возможностью фильтрации по пользователю и интервалу дат.

## Требования к реализации

1. **Таблицы в базе данных PostgreSQL:**
    - Таблица пользователей (`users`) с необходимыми полями (например, id, имя, email, баланс).
    - Таблица транзакций (`transactions`) с необходимыми полями (например, id, user_id, сумма, тип операции, дата).
    - Таблицы заполнены тестовыми (моковыми) данными.

2. **REST API:**
    - Методы для пользователей:
        - Создание пользователя.
        - Редактирование пользователя.
        - Получение информации о пользователях.
    - Методы для транзакций:
        - Создание транзакции.
        - Получение списка транзакций:
            - Все транзакции.
            - По конкретному пользователю.
            - По интервалу дат.

3. **Используемые технологии:**
    - Java 21 и Spring Boot.
    - Spring Data JPA для работы с базой данных.
    - PostgreSQL как СУБД.

4. **Рекомендуемые дополнения (необязательно):**
    - Валидация данных и обработка ошибок.
    - Реализация безопасности (например, JWT аутентификация).

## Инструкция по запуску проекта

### Предварительные требования:

- Установлен Docker и Docker Compose.
- Порт 5433 свободен для PostgreSQL.

### Шаги запуска:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/dev-abdulhay/LUDITO-test.git
   cd LUDITO-test
   ```

2. Постройте и запустите контейнер с приложением:
   ```bash
   docker compose up --build
   ```

3. Приложение будет доступно по адресу:
   ```
   http://localhost:8081
   ```

## API документация

Проект включает интерактивную документацию API через Swagger UI, доступную по адресу:

   ```
   http://localhost:8081/swagger-ui/index.html
   ```

## Тестирование REST API

- Для тестирования API рекомендуется использовать такие инструменты, как Postman или curl.
- Базовые эндпоинты:

## Описание контроллеров REST API

В проекте реализованы следующие основные контроллеры с набором соответствующих REST методов для работы с пользователями, транзакциями и финансовыми операциями:

### 1. AuthController  
Отвечает за регистрацию, аутентификацию и управление сессиями пользователей.  
- `POST /api/v1/auth/register` — регистрация нового пользователя.  
- `POST /api/v1/auth/login` — инициализация процесса входа (логина).  
- `POST /api/v1/auth/login/verify` — верификация логина (например, по коду).  
- `POST /api/v1/auth/logout` — выход из системы (логаут).

### 2. UserController  
Работает с информацией пользователей.  
- `GET /api/v1/user` — получить информацию о текущем пользователе (авторизованном).  
- `POST /api/v1/user/update` — обновить информацию пользователя.  
- `POST /api/v1/user/password/change` — смена пароля пользователя.

### 3. WalletController  
Обрабатывает операции с "кошельками" пользователей, где хранится баланс в различных валютах.  
- `GET /api/v1/wallet` — получить список всех кошельков текущего пользователя.  
- `POST /api/v1/wallet/one` — получить информацию об одном кошельке по UUID.  
- `POST /api/v1/wallet/add` — добавить новый кошелек.

### 4. TransferController  
Отвечает за выполнение инициализации, расчёта комиссии и непосредственного проведения переводов (транзакций) между кошельками пользователей.  
- `POST /api/v1/transfer/fee` — рассчитать комиссию перевода.  
- `POST /api/v1/transfer/init` — инициализировать перевод.  
- `POST /api/v1/transfer/execute` — выполнить перевод средств.

### 5. HistoryController  
Предназначен для поиска и получения истории транзакций (операций) с поддержкой фильтров.  
- `POST /api/v1/history/search` — поиск транзакций с возможностью фильтрации по пользователю, дате и другим параметрам.

---

Все контроллеры используют аннотации для валидации входящих данных (`@Valid`) и возвращают обёрнутые в `ResponseEntity` стандартизированные ответы.

Для базового API префикс `/api/v1/` определяется константами и применяется на уровне роутинга.  
Эндпоинты разбиты по модулям: авторизация, пользователи, кошельки, переводы и история транзакций.

Этот подход обеспечивает ясное разделение ответственности и удобство поддержки и расширения REST API финансового продукта.

---

Спасибо за внимание! В случае вопросов обращайтесь к документации проекта или внутрь реализации.